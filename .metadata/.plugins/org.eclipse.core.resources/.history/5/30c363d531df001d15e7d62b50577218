package com.sangoc.controller.web;

import java.io.IOException;

import javax.inject.Inject;
import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.sangoc.model.ProductModel;
import com.sangoc.service.IProductService;

@WebServlet(urlPatterns = {"/home"})
public class HomeController extends HttpServlet {

	private static final long serialVersionUID = 1L;
	
	//@Inject
	//private ICategoryService categoryService;
	
	@Inject
	private IProductService productService;
	
	@Override
	protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {		
		//req.setAttribute("categories", categoryService.findAll());
		//req.setAttribute("products", productService.findByCategoryId(1L, 1));
		String name = "Gi√†y da";
		Long categoryId = 1L;
		int price = 199000;
		int status = 1;
		ProductModel product = new ProductModel();
		product.setName(name);
		product.setCategoryId(categoryId);
		product.setPrice(price);
		product.setStatus(status);
		productService.save(product);
		//req.setAttribute(name, categoryId);
		RequestDispatcher rd = req.getRequestDispatcher("/views/web/home.jsp");
		rd.forward(req, resp);
	}
	
	@Override
	protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

	}
}
